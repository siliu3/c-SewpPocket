<div class="row">
	<div class="col-lg-12">
		<h1 class="page-header">我的设备</h1>
	</div>
	<!-- /.col-lg-12 -->
</div>

<div class="input-append">
	<input type="text" class="span2 search-query"
		id="table-search-devccode">
	<button class="btn btn-primary" type="button" id="btn-table-search">查询</button>
	<label style="color: #cccccc">请输入设备编号</label>
</div>

<div class="row">
	<div class="col-md-12 column">
		<a class="btn btn-primary" href="#modal-new-device" role="button"
			data-toggle="modal">添加</a>
		<form id="newForm">
			<div class="modal fade" id="modal-new-device">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal"
								aria-hidden="true">×</button>
							<h4 class="modal-title">添加设备</h4>
						</div>
						<div class="modal-body">
							<div id="feedback-form" class="table-form">
								<div class="form-group">
									<div class="input-group">
										<span class="input-group-addon">设备编号</span> <input
											id="new-device-devccode" type="text" class="form-control"
											name="newdevccode" value="xxx0111">
									</div>
								</div>
								<div class="input-group">
									<span class="input-group-addon">地段</span> <input
										id="new-device-section" type="text" class="form-control"
										placeholder="大学城">
								</div>
								<div class="input-group">
									<span class="input-group-addon">位置</span> <input
										id="new-device-location" type="text" class="form-control"
										placeholder="数字家庭基地">
								</div>
								<div class="input-group">
									<span class="input-group-addon">建筑分类</span> <select
										id="new-device-cnsntype" class="form-control">
										<option value="-1">建筑类型</option> <% _.each(cnsntypes.models,
										function(cnsntype){ %>
										<option value="<%= cnsntype.get('code')%>"><%=
											cnsntype.get('dname')%></option> <% }); %>
									</select>
								</div>
								<div class="input-group">
									<span class="input-group-addon">禁播类型</span> <select
										id="new-device-frbdads" class="form-control"> <%
										_.each(frbdads.models, function(frbdads){ %>
										<option value="<%= frbdads.get('dname')%>"><%=
											frbdads.get('dname')%></option> <% }); %>
									</select>
								</div>

								<div class="input-group">
									<span class="input-group-addon">价格等级</span> <select
										id="new-device-price" class="form-control">
										<option value="-1">价格等级</option> <%
										_.each(devicePrices.models, function(devicePrice){ %>
										<option value="<%= devicePrice.get('id')%>"><%=
											devicePrice.get('level')%></option> <% }); %>
									</select>
								</div>

								<div class="input-group">
									<span class="input-group-addon">禁播例外</span> <input
										id="new-device-excncorps" type="text" class="form-control"
										placeholder="丰田,本田">
								</div>

								<div class="input-group">
									<span class="input-group-addon">复位楼层</span> <select
										id="new-device-restfloor" class="form-control">
										<option value="1">1</option>
									</select>
								</div>

								<div class="input-group">
									<span class="input-group-addon">无挡片楼层</span> <input
										id="new-device-nomaskfloor" type="text" class="form-control"
										placeholder="1,2,3">
								</div>

							</div>
						</div>

						<div class="modal-footer">
							<div class="form-group">
								<button class="btn btn-default" data-dismiss="modal">关闭</button>
								<button class="btn btn-primary" id='btn-new-device-commit'
									type="submit">确定添加</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</form>
	</div>
</div>

<div class="modal fade" id="modal-edit-device">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"
					aria-hidden="true">×</button>
				<h4 class="modal-title">编辑设备</h4>
			</div>
			<div class="modal-body">
				设备编号：<input type="text" id="edit-devccode" /><br /> 硬件版本：<input
					type="text" id="edit-hwversion" /><br /> 软件版本：<input type="text"
					id="edit-swversion" /> <input type="text" id="idvalue" />
			</div>
			<div class="modal-footer">
				<a class="btn btn-default" data-dismiss="modal">关闭</a> <a
					class="btn btn-primary" id='btn-edit-device-commit'>保存</a>
			</div>
		</div>
	</div>
</div>

<div class="row clearfix">
	<div class="col-md-12 column device-list">
		<div class="panel panel-default">
			<div class="list-group">

				<table id="example" class="table table-striped table-bordered"
					cellspacing="0" width="100%">
					<thead>
						<tr>
							<th>设备编号</th>
							<th>地段</th>
							<th>位置</th>
							<th><select id="table-select-cnsntype-id"
								class="form-control">
									<option value="-1">建筑类型</option> <%
									console.log(cnsntypes.models) %> <% _.each(cnsntypes.models,
									function(cnsntype){ %>
									<option value="<%= cnsntype.get('code')%>"><%=
										cnsntype.get('dname')%></option> <% }); %>
							</select></th>
							<th>软件版本</th>
							<th>硬件版本</th>
							<th>信号强度</th>
							<th><select id="table-select-status-id" class="form-control">
									<option value="-1">审核状态</option>
									<option value="待审核">待审核</option>
									<option value="已通过">已通过</option>
							</select></th>
							<th>管理</th>
						</tr>
					</thead>

					<tbody>
						<script type="text/html" id="devices_table_tmpl">
                            <% _.each(devices, function(device){ %>
                                
                                <tr>
                                    <td><%= device.get('devccode')%></td>
                                    <td><%= device.get('section')%></td>
                                    <td><%= device.get('location')%></td>
                                    <% if (cnsntypes.where({code : device.get('cnsntype') }).length!=0){ %>
                                        <td><%= cnsntypes.where({code : device.get('cnsntype') })[0].get('dname') %></td>
                                    <% } %>

                                    <td><%= device.get('swversion')%></td>
                                    <td><%= device.get('hwversion')%></td>
                                    <td><%= device.get('signals')%></td>
                                    <td><%= device.get('case')['status']%></td>
                                    <td>
                                        <a class='btn-device-detail' href="device/<%= device.get('id')%>">详情</a>
                                    </td>
                                </tr>
                                
                                <% }); %>
                        </script>
					</tbody>

				</table>

				<div id="page-selection"></div>

			</div>
		</div>
	</div>
</div>



